<!doctype html>
<html lang="en">

    <head>

		<!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <title>Strivix</title>

        <!-- CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
		<link rel="stylesheet" href="styles.css">
        <!-- Favicon and touch icons -->
  

				<style>
				img{

   
     max-width: 100%;
     max-height: 100%;
    }
    .col-2{
      padding-left:4px!important;
      padding-right:0!important;
    } 
    .row{
      margin-left: 0 !important;
      margin-right: 0 !important;
    }
	</style>
    </head>

    <body id="indexbody">

		<!-- Top menu -->
		<nav class="navbar navbar-expand-lg navbar-dark">
			<a class="navbar-brand" href="#"
			  ></a>
			<button
			  class="navbar-toggler"
			  type="button"
			  data-toggle="collapse"
			  data-target="#navbarSupportedContent"
			  aria-controls="navbarSupportedContent"
			  aria-expanded="false"
			  aria-label="Toggle navigation"
			>
			  <span class="navbar-toggler-icon"></span>
			</button>
			
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
			  <ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a class="nav-link" href="#">
						<img src="imgs/netflix-logo-png-2562.png" width="80px" alt="">
					</a>
				  </li>
				<li class="nav-item active">
				  <a class="nav-link" href="#"
					>Home <span class="sr-only">(current)</span></a
				  >
				</li>
				<li class="nav-item">
				  <a class="nav-link" href="#">TV shows</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="#">Movies</a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link" href="#">Recently Added</a>
				  </li>
				  <li class="nav-item">
					<a class="nav-link" href="backoffice.html">Backoffice</a>
				  </li>
				
			  </ul>
			 
			  <div id="search" class="nav-item">
				<i class="fas fa-search"></i>
			  </div>
			  <div class="nav-item" style="color: white;">
				<a class="nav-link">Children</a>
			  </div>
			  <div class="nav-item" style="color: white;" >
				<i class="fas fa-bell"></i>
			  </div>
			  <div  class="nav-item mr-5" style="background-color: black;" >
				<div class="d-flex">
					<div class="dropdown mr-1">
					  <div class="dropdown-menu" aria-labelledby="dropdownMenuOffset">
						<a class="dropdown-item" href="#">Action</a>
						<a class="dropdown-item" href="#">Another action</a>
						<a class="dropdown-item" href="#">Something else here</a>
					  </div>
					</div>
					<div class="btn-group " style="background-color: black;">
						<div class="ml-2"><img src="imgs/netflixpic.PNG" width="40px" height="40px" alt="">
						
						</div>
					  <button type="button" style="color: white;"class="btn  dropdown-toggle dropdown-toggle-split" id="dropdownMenuReference" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-reference="parent">
						<span class="sr-only">Toggle Dropdown</span>
					  </button>
					  <div class="dropdown-menu" aria-labelledby="dropdownMenuReference">
						<a class="dropdown-item" href="payment.html">Payment</a>
						<a class="dropdown-item" href="edit-profile.html">Edit Profile</a>
						
					</div>
				  </div>
			  </div>
			  
		  </nav>
		  <div class="title-wrapper">
			  <div style="display: inline-flex;">
			<h3 >TV shows</h3>
			<div class="dropdown mr-1">
				<button type="button" style="color: white;"class="btn btn-outline-dark ml- dropdown-toggle" id="dropdownMenuOffset" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-offset="10,20">
				  Genres
				</button>
				<div class="dropdown-menu" aria-labelledby="dropdownMenuOffset">
				  <a class="dropdown-item" href="#">Action</a>
				  <a class="dropdown-item" href="#">Another action</a>
				  <a class="dropdown-item" href="#">Something else here</a>
				</div>
			</div>
		</div>
			<p>Trending Now</p>
	</div>

      <div id="carousels">

	  </div>
	 
	
    
	
		<!-- Footer -->
		<footer>
			<div class="wrap">
			<div class="container ">
				<div class="row ">
				  <div class="col" id="footerIcons">
					<i class="fab fa-facebook-square"></i>
					<i class="fab fab fa-instagram"></i>
					<i class="fab fa-twitter-square"></i>
					<i class="fab fa-youtube"></i>
				  </div>
				</div>
			  </div>
			  <div class="container">
				<div class="row">
				  <div class="col footerContent">
					<p>Audio and Subtitle</p>
					<p>Media Center</p>
					<p>Privacy</p>
					<p>Contact Us</p>
				  </div>
				  <div class="col footerContent">
					<p>Audio Description</p>
					<p>Investor Relations</p>
					<p>Legal Notices</p>
				  </div>
				  <div class="col footerContent">
					<p>Help Center</p>
					<p>Jobs</p>
					<p>Cookie Preferences</p>
				  </div>
				  <div class="col footerContent">
					<p>Gift Cards</p>
					<p>Terms of Use</p>
					<p>Corporate Information</p>
				  </div>
				</div>
				<button type="button" class="btn btn-outline-dark my-3" style="color: #c1c1c1;">Service Code</button>
				<p style="color: #c1c1c1; font-size: 15px;">&copy; 1997-2019 Netflix, Inc. {i-0d00fcda2fdf9c0de}</p>
			  
			  </div>
			</div>

			</div>
		  
		
			
			</div>
			<!-- Copyright -->
		  
		  </footer>

		  <script>
			//   let CategoryArray
			  window.onload=async()=>{
				// var i=0
				// var imagecount=0
			  try{
				//   let CategoryArray=[]
				  let movieCategories=await getMovies()
				  console.log('Movie Categories',movieCategories)
			
				  let j=0
				  let carousels_ref=document.querySelector('#carousels')
				  movieCategories.forEach(async Category => {
						let carousel_count=0
						let item_nb=0
						let newCategory_div=document.createElement('div')
						newCategory_div.innerHTML= 
						`<h1>${Category}</h1>
						<div id="carousel-${Category}" class="carousel slide" data-ride="carousel">
							<ol class="carousel-indicators">
							<li data-target="#carousel-${Category}" data-slide-to="0" class="active"></li>
							<li data-target="#carousel-${Category}" data-slide-to="1"></li>
							<li data-target="#carousel-${Category}" data-slide-to="2"></li>
							</ol>
							<div class="carousel-inner inner-${Category}">
							</div>`
						    carousels_ref.insertBefore(newCategory_div,carousels_ref.childNodes[carousel_count])
						 
						fillCarousel(Category)
						
					
						// let newCarousel=document.createElement('div')
						// newCarousel.innerHTML+=`
							// <div id="carousel-${Category}" class="carousel slide" data-ride="carousel">
							// <ol class="carousel-indicators">
							// <li data-target="#carousel-${Category}" data-slide-to="0" class="active"></li>
							// <li data-target="#carousel-${Category}" data-slide-to="1"></li>
							// <li data-target="#carousel-${Category}" data-slide-to="2"></li>
							// </ol>
							// <div class="carousel-inner inner-${Category}"> </div>`
						// carousels_ref.insertBefore(newCarousel, carousels_ref.childNodes[childcount])
						// let categoryMovies=await getCategoryMovies(Category)
						// console.log(categoryMovies)
						// categoryMovies.forEach(movie=>{
							
							// imagecount++
						
							
							// let item_nb=0
					
							// let carousel_inner_ref
							// let row_ref
							
							// if(item_nb===0&&imagecount===1){
							// 	 carousel_inner_ref=document.querySelector(`.inner-${Category}`)
							// 	carousel_inner_ref.innerHTML=`
								
							// 	<div>${movie.category}</div>
							// 	<div class="carousel-item-${Category}${item_nb} active">
							// 		<div class="row row-${Category}${item_nb}" style="padding: 0%;">
							// 			<div class="col-2">
							// 				<a href='details.html?movieId=${movie._id}&movieCategory=${movie.category}'>
							// 				<img src=${movie.imageUrl} class="img-responsive"></a>
							// 			</div>
							// 		</div>
							//     </div>
							// `
							
								
							// }
							// if(item_nb===0&&imagecount>1){
							// 	row_ref=document.querySelector(`.row-${Category}${item_nb}`)
								
							// 	row_ref.innerHTML+=`
							// 	<div class="col-2">
							// 	<a href='details.html?movieId=${movie._id}&movieCategory=${movie.category}'><img src=${movie.imageUrl} 
							// 	class="img-responsive"></a>
							// 	</div>
							// 				`
							// 	imagecount++
								
							// }
							
							
							
							// if(item_nb>0){

								
							// 	let carousel_inner_ref=document.querySelector(`.inner-${Category}`)
							// 	console.log(carousel_inner_ref)
							// 	carousel_inner_ref.innerHTML+=`<div class="carousel-item-${Category}${item_nb}">
							// 		<div class="row row-${Category}${item_nb}" style="padding: 0%;"> <img src=${movie.imageUrl} ></div>`
	
							// }
							// item_nb++
						
					// if(!CategoryArray.includes(movie.category)){
					// 	i++
					// 	CategoryArray.push(movie.category)
						
						
						
						
					// }
					// else{
					// 	console.log('category exits')
					// }
					// carousel_wrapper.innerHTML+=`
					// <h2>${Category}</h2>
					// <div class="movie-info">
					// <img class='carousel-img'src='${movie.imageUrl}'>
					// <a href='details.html?movieId=${movie._id}&movieCategory=${movie.category}'><h3 class="movie-name">${movie.name} </h3> </a>
					// </div>	`

					// })
					
					
					
				  });

			  }catch(err){
				  alert(err)

			  }
			}

			const fillCarousel=async (Category)=>{
				let carouselInner_ref
				let item_number=0
				let categoryMovies=await getCategoryMovies(Category)
				for(let i=0;i<categoryMovies.length;i++){
					carouselInner_ref=document.querySelector(` .inner-${Category}`)
					if(i===0){
						console.log('here 1')
						carouselInner_ref.innerHTML=
						`<div class="carousel-item-${Category}${item_number} active">
									<div class="row row-${Category}${item_number}" style="padding: 0%;">
										<div class="col-2">
											<a href='details.html?movieId=${categoryMovies[i]._id}&movieCategory=${categoryMovies[i].category}'>
											<img src=${categoryMovies[i].imageUrl} class="img-responsive"></a>
										</div>
										
									</div>`
						// fillinnerItem(Category,i,categoryMovies[i])
							

					}
					if(i>0){
						let carouselRow_refr=document.querySelector(`.row-${Category}${item_number}`)
						console.log('here 2')
						carouselRow_refr.innerHTML+=fillinnerItem(Category,i,categoryMovies[i])
						if(i===6){
							item_number++
						}
					}
					// else if(i%6===0&&i!==0){
					// 	carouselInner_ref.innerHTML=
					// 	`<div class="carousel-item-${Category}${i} active">
					// 				<div class="row row-${Category}${i}" style="padding: 0%;">
					// 					<div class="col-2">
					// 						<a href='details.html?movieId=${categoryMovies[i]._id}&movieCategory=${categoryMovies[i].category}'>
					// 						<img src=${categoryMovies[i].imageUrl} class="img-responsive"></a>
					// 					</div>
					// 				</div>`
					// }

				}
			}
			const fillinnerItem=(Category,i,categoryMovie)=>{
				// let carouselRow_ref=document.querySelector(` .row-${Category}${i}`)
				// carouselRow_ref.innerHTML+=
					return `<div class="col-2">
											<a href='details.html?movieId=${categoryMovie._id}&movieCategory=${categoryMovie.category}'>
											<img src=${categoryMovie.imageUrl} class="img-responsive"></a>
										</div>`
				// return carouselRow_ref.innerHTML

			}

			
		  </script>
		<!-- Javascript -->
		<script src="functions.js"></script>
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    </body>

</html>